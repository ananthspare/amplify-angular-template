<div class="profile-container">
  <div class="profile-header">
    <h2>Profile & Settings</h2>
    <div *ngIf="message" class="message" [class.success]="message.includes('successfully')">
      {{ message }}
    </div>
  </div>

  <div class="profile-sections">
    <!-- User Profile Section -->
    <div class="profile-section">
      <h3>Personal Information</h3>
      <form (ngSubmit)="saveProfile()" class="profile-form">
        <div class="form-group">
          <label>Email:</label>
          <input type="email" [(ngModel)]="userProfile.email" name="email" readonly class="form-input readonly">
        </div>
        
        <div class="form-group">
          <label>First Name:</label>
          <input type="text" [(ngModel)]="userProfile.given_name" name="given_name" class="form-input">
        </div>
        
        <div class="form-group">
          <label>Last Name:</label>
          <input type="text" [(ngModel)]="userProfile.family_name" name="family_name" class="form-input">
        </div>
        
        <button type="submit" class="save-btn" [disabled]="isLoading">
          {{ isLoading ? 'Saving...' : 'Save Profile' }}
        </button>
      </form>
    </div>

    <!-- Notification Preferences Section -->
    <div class="profile-section">
      <h3>Notification Preferences</h3>
      <form (ngSubmit)="savePreferences()" class="profile-form">
        <div class="form-group">
          <label>Notification Email:</label>
          <input type="email" [(ngModel)]="userPreferences.email" name="notificationEmail" class="form-input">
          <small class="form-help">Email address for event reminders</small>
        </div>
        
        <div class="form-group">
          <label>
            <input type="checkbox" [(ngModel)]="userPreferences.enableDailyReminders" name="enableDaily">
            Enable Daily Reminders
          </label>
          <small class="form-help">Receive daily summary of today's events</small>
        </div>
        
        <div class="form-group">
          <label>
            <input type="checkbox" [(ngModel)]="userPreferences.enableWeeklyReminders" name="enableWeekly">
            Enable Weekly Reminders
          </label>
          <small class="form-help">Receive weekly summary of upcoming events</small>
        </div>
        
        <div class="form-group">
          <label>Timezone:</label>
          <select [(ngModel)]="userPreferences.timezone" name="timezone" class="form-input">
            <option value="UTC">UTC</option>
            <option value="America/New_York">Eastern Time</option>
            <option value="America/Chicago">Central Time</option>
            <option value="America/Denver">Mountain Time</option>
            <option value="America/Los_Angeles">Pacific Time</option>
            <option value="Europe/London">London</option>
            <option value="Europe/Paris">Paris</option>
            <option value="Asia/Tokyo">Tokyo</option>
            <option value="Asia/Shanghai">Shanghai</option>
            <option value="Australia/Sydney">Sydney</option>
          </select>
          <small class="form-help">Your local timezone for reminders</small>
        </div>
        
        <button type="submit" class="save-btn" [disabled]="isLoading">
          {{ isLoading ? 'Saving...' : 'Save Preferences' }}
        </button>
        
        <div class="test-buttons">
          <button type="button" class="test-btn" (click)="testDailyEmail()">
            Test Daily Events
          </button>
          <button type="button" class="test-btn" (click)="testWeeklyEmail()">
            Test Weekly Events
          </button>
        </div>
      </form>
    </div>
  </div>
</div>